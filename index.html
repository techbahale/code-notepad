<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Notepad</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; height: 100%; font-family: Consolas, Monaco, Menlo, monospace; background: #1e1e1e; color: #d4d4d4; overflow: hidden;">

  <div class="editor-container" style="display: flex; flex-direction: column; height: 100vh; padding: 1rem; gap: 0.5rem;">

    <div class="editor-body" style="flex: 1; position: relative; border-radius: 4px; overflow: hidden; background: #252526; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">
      <div id="lineNumbers" style="position: absolute; left: 0; top: 0; bottom: 0; width: 40px; padding: 1rem 0.5rem; text-align: right; background: #1e1e1e; color: #858585; font-size: 0.9rem; user-select: none; overflow: hidden;"></div>
      <textarea id="noteContent" spellcheck="false" placeholder="Write your notes here..."
        style="width: 100%; height: 100%; padding: 1rem 1rem 1rem 50px; font-family: Consolas, Monaco, Menlo, monospace; font-size: 1rem; line-height: 1.5; color: #d4d4d4; background: #1e1e1e; border: none; resize: none; outline: none; tab-size: 2;"></textarea>
    </div>

    <div class="editor-footer" style="display: flex; flex-direction: column; align-items: center; padding: 0.5rem 0;">
      <div class="button-container" style="display: flex; justify-content: center; width: 100%; margin-bottom: 0.5rem;">
        <button onclick="saveNote()" style="padding: 0.5rem 1.25rem; font-family: inherit; font-size: 0.9rem; background-color: #0e639c; color: white; border: none; border-radius: 3px; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; width: fit-content; max-width: 90vw; word-break: break-word;">
          💾 Save
        </button>
      </div>
      <div id="status" style="font-size: 0.85rem; color: #6A9955; text-align: center; height: 1rem;"></div>
    </div>

  </div>

  <script>
    const GIST_ID = "22a1a8c85b657b4faf769f4b75d849b1"; // Replace with your Gist ID
    const FILENAME = "notes.txt"; // Replace with your filename

    let GITHUB_TOKEN = localStorage.getItem("GITHUB_TOKEN");

    if (!GITHUB_TOKEN) {
      GITHUB_TOKEN = prompt("Paste your GitHub token:");
      localStorage.setItem("GITHUB_TOKEN", GITHUB_TOKEN);
    }

    function saveNote() {
      const content = document.getElementById("noteContent").value;
      const status = document.getElementById("status");

      const payload = {
        files: {
          [FILENAME]: {
            content: content
          }
        }
      };

      status.textContent = "Saving...";
      status.style.color = "#6A9955";

      fetch(`https://api.github.com/gists/${GIST_ID}`, {
        method: "PATCH",
        headers: {
          Authorization: `token ${GITHUB_TOKEN}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      })
        .then((res) => res.json())
        .then((data) => {
          if (data.files) {
            status.textContent = "✅ Saved!";
            status.style.color = "#6A9955";
            setTimeout(() => status.textContent = "", 2500);
          } else {
            status.textContent = "❌ Save failed";
            status.style.color = "#f14c4c";
          }
        })
        .catch((err) => {
          console.error(err);
          status.textContent = "❌ Network error";
          status.style.color = "#f14c4c";
        });
    }

    function loadNote() {
      const status = document.getElementById("status");

      fetch(`https://api.github.com/gists/${GIST_ID}`, {
        headers: {
          Authorization: `token ${GITHUB_TOKEN}`
        }
      })
        .then(res => {
          if (!res.ok) throw new Error("Failed to fetch Gist");
          return res.json();
        })
        .then(gist => {
          const file = gist.files[FILENAME];
          if (file) {
            document.getElementById("noteContent").value = file.content;
            updateLineNumbers();
            status.textContent = "";
          } else {
            status.textContent = "File not found";
            status.style.color = "#f14c4c";
          }
        })
        .catch(err => {
          console.error(err);
          status.textContent = "Failed to load";
          status.style.color = "#f14c4c";
        });
    }

    function updateLineNumbers() {
      const textarea = document.getElementById("noteContent");
      const lines = textarea.value.split('\n').length;
      const lineNumbersDiv = document.getElementById("lineNumbers");

      lineNumbersDiv.innerHTML = Array(lines).fill(0).map((_, i) => `<div>${i + 1}</div>`).join('');
    }

    document.getElementById("noteContent").addEventListener("input", updateLineNumbers);
    document.getElementById("noteContent").addEventListener("scroll", function () {
      document.getElementById("lineNumbers").scrollTop = this.scrollTop;
    });

    window.onload = function () {
      loadNote();
      updateLineNumbers();
    };
  </script>
</body>
</html>


<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Notepad</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="editor-container">
    <div class="editor-body">
      <div class="line-numbers" id="lineNumbers"></div>
      <textarea id="noteContent" spellcheck="false" placeholder="Write your notes here..."></textarea>
    </div>

    <div class="editor-footer">
      <div class="button-container">
        <button class="save-button" onclick="saveNote()">
          💾 Save
        </button>
      </div>
      <div id="status"></div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html> -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Notepad</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="editor-container">    
    <div class="editor-body">
      <textarea id="noteContent" spellcheck="false" placeholder="SFMC Notes"></textarea>
    </div>
    
    <div class="editor-footer">
      <div class="button-container">
        <button class="save-button" onclick="saveNote()">
          <span>💾</span>
          <span>Save</span>
        </button>
      </div>
      <div id="status"></div>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
 -->
